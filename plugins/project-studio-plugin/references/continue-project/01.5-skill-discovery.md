# Phase C1.5: Skill Discovery

Suggest specialized skills based on detected tech stack before continuing with inference phases.

## Purpose

After codebase analysis identifies the tech stack, this step ensures the subsequent agents (C2-C4) have access to specialized skills that will help them better understand and document the codebase.

## Why This Step Exists

**Problem:** Generic agents may miss framework-specific patterns.

**Example:** A Scala + Spring Boot project has specific conventions:
- Dependency injection patterns
- Configuration management
- Testing patterns
- Build conventions (sbt)

An agent with `scala-spring-patterns` skill will:
- Recognize these patterns
- Document them correctly
- Use proper terminology

**Without specialized skills:** Agent might miss or misinterpret framework conventions.

## Process

### Step 1: Extract Tech Stack

From `docs/CODEBASE_ANALYSIS.md`, identify:
- Primary language(s)
- Frameworks
- Database
- Build tools
- Testing frameworks

### Step 2: Match Skills from Registry

Query `references/registry.md` for matching skills:

| Detected Stack | Recommended Skill | Helps With |
|----------------|-------------------|------------|
| Scala + Spring | scala-spring-patterns | DI patterns, config, testing |
| Python + FastAPI | fastapi, python-dev | Async patterns, Pydantic models |
| TypeScript + React | react-tanstack | Hooks, state management, queries |
| TypeScript + Angular | angular-modern | Services, modules, RxJS |
| PostgreSQL | postgresql | Query patterns, migrations |
| Databricks | databricks-development | Notebooks, Spark patterns |

### Step 3: Present Recommendations

Output format:

```markdown
## Skill Discovery Complete

### Detected Tech Stack
- **Language:** Scala 2.13
- **Framework:** Spring Boot 3.x
- **Build:** sbt
- **Database:** PostgreSQL
- **Testing:** ScalaTest

### Recommended Skills

Install these skills before continuing to get better inference results:

| Skill | Source | Why |
|-------|--------|-----|
| scala-spring-patterns | skillsmp.com | Spring Boot DI, config patterns |
| postgresql | skillsmp.com | Database query patterns |

### Installation

**Option A: Install recommended skills**
```bash
# Example installation commands
claude skill install scala-spring-patterns
claude skill install postgresql
```

**Option B: Skip and continue**
Run `/phase infer-prd` to continue without specialized skills.

### Benefits of Installing

With `scala-spring-patterns`, the architect agent will:
- Recognize @Autowired and constructor injection
- Document application.yml patterns correctly
- Identify service layer conventions
- Note Spring-specific test patterns

Without it, the agent may:
- Miss framework conventions
- Use generic terminology
- Overlook important patterns
```

### Step 4: User Decision

User either:
1. Installs recommended skills
2. Skips and continues with generic skills

### Step 5: Continue

After user decision, run `/phase infer-prd` to continue to C2.

## Gate Criteria

**C1.5 â†’ C2 Gate:**
- [ ] Tech stack extracted from CODEBASE_ANALYSIS.md
- [ ] Skill recommendations presented
- [ ] User acknowledged (installed or skipped)

## Skills by Tech Stack Reference

### Backend Languages

| Language | Skills |
|----------|--------|
| Scala | scala-spring-patterns, senior-data-engineer |
| Python | python-dev, fastapi, jupyter-notebook |
| TypeScript/Node | typescript-backend |
| Go | go-patterns |
| Rust | rust-patterns |

### Frontend Frameworks

| Framework | Skills |
|-----------|--------|
| React | react-tanstack, ui-ux-pro-max |
| Angular | angular-modern |
| Vue | vue-patterns |
| Svelte | svelte-patterns |

### Databases

| Database | Skills |
|----------|--------|
| PostgreSQL | postgresql, database-implementation |
| MongoDB | mongodb-patterns |
| SQL Server | sqlserver |
| SQLite | database-implementation |

### Data/ML

| Platform | Skills |
|----------|--------|
| Databricks | databricks-development |
| Jupyter | jupyter-notebook |
| Spark | senior-data-engineer |

## Key Principle

**Skills enhance, not replace.**

Specialized skills provide:
- Framework-specific patterns
- Correct terminology
- Convention recognition

But agents can still function with generic skills - results are just less precise.
